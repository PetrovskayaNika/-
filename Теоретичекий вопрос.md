Теоретический вопрос

---

**Протокол RPC (remote procedure call)**

   - принципы проетирования RPC запросов

   - реализация RPC протокола поверх HTTP запросов

   - передача данных для выполнения RPC запроса

   - особенности маршрутизации/балансировки RPC запросов

   - передача результатов выполнения запросов


Описать особенности реализации RPC протокола (сравнительная характеристика с REST API). Передача параметров запроса/результатов ответа, форматы сериализации данных (на примере JSON).

Ответ
---

**RPC(удалённый вызов процедур)** - протокол, позволяющий удалённо вызывать функции на удалённом сервере так, как если бы они выполнялись локально.

  

**Принципы проектирования RPC запросов:**

   - Каждый RPC-запрос должен явно указывать, какую функцию/метод нужно вызвать.

   - Передается в структурированном формате (JSON, XML или Protobuf).

   - Результата выполнения функции должен передаваться в сериализованном формате (JSON или XML).

---

**Реализация RPC протокола поверх HTTP запросов:**

   - HTTP - основной метод для RPC, т.к позволяет передавать тело запроса

   - Использует заголовок для метаданных (аутентификация, тип вызова).

---

**Передача данных для выполнения RPC запроса:**

   - JSON

   - XML

   - Protobuf

---

**Особенности маршрутизации/балансировки RPC запросов**

   - Маршрутизация на основе: Заголовков и правил Nginx

---

**Передача результатов выполнения запросов:**

   - Передача в формате: JSON, XML или Protobuf

   - Также если произошла ошибка, то вернется ошибка кодом:

        - `400 bad request` - неверный формат запроса

        - `401 unauyhorized` - не прошла аутентификация

        - `405 method not allowed` - не предусмотрен метод(POST)

        - `500 internal server error` - ошибка сервера


Сравнение RPC и REST API
---

|Критерий|RPC|REST API|
|---|---|---|
|**Подход**|Вызов функций|Работа с ресурсами (`/users/1`)|
|**Методы HTTP**|Обычно только POST|GET, POST, PUT, DELETE, PATCH|
|**Формат данных**|JSON/XML/Protobuf (структурировано)|JSON/XML (ресурсо-ориентировано)|
|**Гибкость**|Жёсткая привязка к методам|Более универсальный|
|**Использование**|Микросервисы, внутренние API|Публичные API, веб-приложения|
